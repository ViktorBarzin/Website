<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 620" width="960" height="620" font-family="sans-serif">
  <defs>
    <marker id="arrow-gray" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#6c7086"/>
    </marker>
    <marker id="arrow-blue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#89b4fa"/>
    </marker>
    <marker id="arrow-green" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#a6e3a1"/>
    </marker>
    <marker id="arrow-orange" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#fab387"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="960" height="620" rx="8" fill="#1e1e2e"/>

  <!-- Title -->
  <text x="480" y="30" fill="#cdd6f4" font-size="16" font-weight="bold" text-anchor="middle">Home Lab v3 -- High-Level Architecture</text>

  <!-- Internet Cloud -->
  <ellipse cx="480" cy="65" rx="70" ry="22" fill="#313244" stroke="#6c7086" stroke-width="1.5"/>
  <text x="480" y="70" fill="#cdd6f4" font-size="12" text-anchor="middle">Internet</text>

  <!-- Cloudflare -->
  <rect x="400" y="100" width="160" height="36" rx="6" fill="#313244" stroke="#fab387" stroke-width="1.5"/>
  <text x="480" y="122" fill="#fab387" font-size="11" font-weight="bold" text-anchor="middle">Cloudflare (DNS + Tunnel)</text>

  <!-- Arrow: Internet -> Cloudflare -->
  <line x1="480" y1="87" x2="480" y2="100" stroke="#6c7086" stroke-width="1.5" marker-end="url(#arrow-gray)"/>

  <!-- pfSense -->
  <rect x="400" y="155" width="160" height="36" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="1.5"/>
  <text x="480" y="177" fill="#a6e3a1" font-size="11" font-weight="bold" text-anchor="middle">pfSense Firewall</text>

  <!-- Arrow: Cloudflare -> pfSense -->
  <line x1="480" y1="136" x2="480" y2="155" stroke="#6c7086" stroke-width="1.5" marker-end="url(#arrow-gray)"/>

  <!-- VLAN labels area -->
  <!-- Home VLAN -->
  <rect x="40" y="215" width="240" height="50" rx="6" fill="#313244" stroke="#89b4fa" stroke-width="1.5"/>
  <text x="160" y="236" fill="#89b4fa" font-size="11" font-weight="bold" text-anchor="middle">Home Network</text>
  <text x="160" y="252" fill="#6c7086" font-size="10" text-anchor="middle">192.168.1.0/24</text>

  <!-- Management VLAN -->
  <rect x="360" y="215" width="240" height="50" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="1.5"/>
  <text x="480" y="236" fill="#a6e3a1" font-size="11" font-weight="bold" text-anchor="middle">VLAN 10 -- Management</text>
  <text x="480" y="252" fill="#6c7086" font-size="10" text-anchor="middle">10.0.10.0/24</text>

  <!-- Kubernetes VLAN -->
  <rect x="680" y="215" width="240" height="50" rx="6" fill="#313244" stroke="#fab387" stroke-width="1.5"/>
  <text x="800" y="236" fill="#fab387" font-size="11" font-weight="bold" text-anchor="middle">VLAN 20 -- Kubernetes</text>
  <text x="800" y="252" fill="#6c7086" font-size="10" text-anchor="middle">10.0.20.0/24</text>

  <!-- Arrows pfSense -> VLANs -->
  <line x1="440" y1="191" x2="160" y2="215" stroke="#89b4fa" stroke-width="1.5" marker-end="url(#arrow-blue)"/>
  <line x1="480" y1="191" x2="480" y2="215" stroke="#a6e3a1" stroke-width="1.5" marker-end="url(#arrow-green)"/>
  <line x1="520" y1="191" x2="800" y2="215" stroke="#fab387" stroke-width="1.5" marker-end="url(#arrow-orange)"/>

  <!-- Proxmox Box -->
  <rect x="100" y="295" width="760" height="230" rx="8" fill="none" stroke="#6c7086" stroke-width="1.5" stroke-dasharray="6,3"/>
  <text x="480" y="315" fill="#6c7086" font-size="13" font-weight="bold" text-anchor="middle">Proxmox Hypervisor (192.168.1.200)</text>

  <!-- k8s-master -->
  <rect x="130" y="330" width="140" height="44" rx="6" fill="#313244" stroke="#89b4fa" stroke-width="1.5"/>
  <text x="200" y="349" fill="#89b4fa" font-size="10" font-weight="bold" text-anchor="middle">k8s-master</text>
  <text x="200" y="365" fill="#6c7086" font-size="9" text-anchor="middle">8C / 16G</text>

  <!-- k8s-node1 (GPU) -->
  <rect x="290" y="330" width="160" height="44" rx="6" fill="#313244" stroke="#f38ba8" stroke-width="2"/>
  <text x="370" y="349" fill="#f38ba8" font-size="10" font-weight="bold" text-anchor="middle">k8s-node1 (GPU)</text>
  <text x="370" y="365" fill="#6c7086" font-size="9" text-anchor="middle">16C / 24G + RTX 3060</text>

  <!-- k8s-node2-4 -->
  <rect x="470" y="330" width="140" height="44" rx="6" fill="#313244" stroke="#89b4fa" stroke-width="1.5"/>
  <text x="540" y="349" fill="#89b4fa" font-size="10" font-weight="bold" text-anchor="middle">k8s-node2-4</text>
  <text x="540" y="365" fill="#6c7086" font-size="9" text-anchor="middle">3x 8C / 16G</text>

  <!-- TrueNAS -->
  <rect x="630" y="330" width="140" height="44" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="1.5"/>
  <text x="700" y="349" fill="#a6e3a1" font-size="10" font-weight="bold" text-anchor="middle">TrueNAS</text>
  <text x="700" y="365" fill="#6c7086" font-size="9" text-anchor="middle">16C / 16G / NFS</text>

  <!-- devvm -->
  <rect x="130" y="395" width="140" height="44" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="1.5"/>
  <text x="200" y="414" fill="#a6e3a1" font-size="10" font-weight="bold" text-anchor="middle">devvm</text>
  <text x="200" y="430" fill="#6c7086" font-size="9" text-anchor="middle">16C / 8G</text>

  <!-- Home Assistant -->
  <rect x="290" y="395" width="160" height="44" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="1.5"/>
  <text x="370" y="414" fill="#a6e3a1" font-size="10" font-weight="bold" text-anchor="middle">Home Assistant</text>
  <text x="370" y="430" fill="#6c7086" font-size="9" text-anchor="middle">8C / 16G</text>

  <!-- Docker Registry -->
  <rect x="470" y="395" width="140" height="44" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="1.5"/>
  <text x="540" y="414" fill="#a6e3a1" font-size="10" font-weight="bold" text-anchor="middle">docker-registry</text>
  <text x="540" y="430" fill="#6c7086" font-size="9" text-anchor="middle">4C / 4G</text>

  <!-- Windows 10 -->
  <rect x="630" y="395" width="140" height="44" rx="6" fill="#313244" stroke="#6c7086" stroke-width="1.5"/>
  <text x="700" y="414" fill="#cdd6f4" font-size="10" font-weight="bold" text-anchor="middle">Windows 10</text>
  <text x="700" y="430" fill="#6c7086" font-size="9" text-anchor="middle">16C / 8G</text>

  <!-- VPN Tunnels -->
  <rect x="130" y="460" width="160" height="44" rx="6" fill="#313244" stroke="#f9e2af" stroke-width="1.5"/>
  <text x="210" y="479" fill="#f9e2af" font-size="10" font-weight="bold" text-anchor="middle">WireGuard VPN</text>
  <text x="210" y="495" fill="#6c7086" font-size="9" text-anchor="middle">Site-to-Site + Roaming</text>

  <rect x="310" y="460" width="160" height="44" rx="6" fill="#313244" stroke="#f9e2af" stroke-width="1.5"/>
  <text x="390" y="479" fill="#f9e2af" font-size="10" font-weight="bold" text-anchor="middle">Headscale (Tailscale)</text>
  <text x="390" y="495" fill="#6c7086" font-size="9" text-anchor="middle">Mesh VPN Overlay</text>

  <!-- HA Sofia Remote Site -->
  <rect x="680" y="555" width="200" height="44" rx="6" fill="#313244" stroke="#f38ba8" stroke-width="1.5"/>
  <text x="780" y="574" fill="#f38ba8" font-size="10" font-weight="bold" text-anchor="middle">HA Sofia -- Remote Site</text>
  <text x="780" y="590" fill="#6c7086" font-size="9" text-anchor="middle">Home Assistant (WireGuard)</text>

  <!-- Arrow: VPN -> Remote Site -->
  <path d="M290,504 L290,577 L680,577" fill="none" stroke="#f9e2af" stroke-width="1.5" marker-end="url(#arrow-orange)" stroke-dasharray="5,3"/>

  <!-- Legend -->
  <rect x="40" y="555" width="12" height="12" rx="2" fill="#89b4fa"/>
  <text x="58" y="565" fill="#cdd6f4" font-size="9">Kubernetes</text>
  <rect x="130" y="555" width="12" height="12" rx="2" fill="#a6e3a1"/>
  <text x="148" y="565" fill="#cdd6f4" font-size="9">Infrastructure</text>
  <rect x="235" y="555" width="12" height="12" rx="2" fill="#f38ba8"/>
  <text x="253" y="565" fill="#cdd6f4" font-size="9">GPU / Remote</text>
  <rect x="335" y="555" width="12" height="12" rx="2" fill="#f9e2af"/>
  <text x="353" y="565" fill="#cdd6f4" font-size="9">VPN Tunnels</text>
</svg>