<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 560" width="960" height="560" font-family="sans-serif">
  <defs>
    <marker id="a1" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#6c7086"/>
    </marker>
    <marker id="a-blue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#89b4fa"/>
    </marker>
    <marker id="a-green" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#a6e3a1"/>
    </marker>
    <marker id="a-orange" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#fab387"/>
    </marker>
    <marker id="a-yellow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#f9e2af"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="960" height="560" rx="8" fill="#1e1e2e"/>

  <!-- Title -->
  <text x="480" y="30" fill="#cdd6f4" font-size="16" font-weight="bold" text-anchor="middle">Network Topology</text>

  <!-- ISP -->
  <ellipse cx="480" cy="65" rx="55" ry="20" fill="#313244" stroke="#6c7086" stroke-width="1.5"/>
  <text x="480" y="70" fill="#cdd6f4" font-size="11" text-anchor="middle">ISP</text>

  <!-- Arrow ISP -> pfSense -->
  <line x1="480" y1="85" x2="480" y2="110" stroke="#6c7086" stroke-width="1.5" marker-end="url(#a1)"/>
  <text x="498" y="102" fill="#6c7086" font-size="9">WAN</text>

  <!-- pfSense -->
  <rect x="380" y="110" width="200" height="50" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="2"/>
  <text x="480" y="133" fill="#a6e3a1" font-size="13" font-weight="bold" text-anchor="middle">pfSense</text>
  <text x="480" y="150" fill="#6c7086" font-size="9" text-anchor="middle">Router / Firewall / DHCP / NAT</text>

  <!-- Three network branches -->
  <!-- Arrows from pfSense -->
  <line x1="420" y1="160" x2="160" y2="200" stroke="#89b4fa" stroke-width="1.5" marker-end="url(#a-blue)"/>
  <line x1="480" y1="160" x2="480" y2="200" stroke="#a6e3a1" stroke-width="1.5" marker-end="url(#a-green)"/>
  <line x1="540" y1="160" x2="800" y2="200" stroke="#fab387" stroke-width="1.5" marker-end="url(#a-orange)"/>

  <!-- ========== Home Network (Left) ========== -->
  <rect x="40" y="200" width="240" height="40" rx="6" fill="#313244" stroke="#89b4fa" stroke-width="1.5"/>
  <text x="160" y="216" fill="#89b4fa" font-size="11" font-weight="bold" text-anchor="middle">Home Network</text>
  <text x="160" y="232" fill="#6c7086" font-size="9" text-anchor="middle">192.168.1.0/24 (untagged)</text>

  <!-- Proxmox Host -->
  <rect x="55" y="260" width="210" height="44" rx="6" fill="#313244" stroke="#89b4fa" stroke-width="1"/>
  <text x="160" y="280" fill="#cdd6f4" font-size="10" font-weight="bold" text-anchor="middle">Proxmox Host</text>
  <text x="160" y="295" fill="#6c7086" font-size="9" text-anchor="middle">192.168.1.200</text>
  <line x1="160" y1="240" x2="160" y2="260" stroke="#89b4fa" stroke-width="1" marker-end="url(#a-blue)"/>

  <!-- Bridges -->
  <rect x="55" y="320" width="95" height="36" rx="5" fill="#313244" stroke="#6c7086" stroke-width="1"/>
  <text x="102" y="338" fill="#cdd6f4" font-size="9" font-weight="bold" text-anchor="middle">vmbr0</text>
  <text x="102" y="350" fill="#6c7086" font-size="8" text-anchor="middle">Home LAN</text>

  <rect x="170" y="320" width="95" height="36" rx="5" fill="#313244" stroke="#6c7086" stroke-width="1"/>
  <text x="217" y="338" fill="#cdd6f4" font-size="9" font-weight="bold" text-anchor="middle">vmbr1</text>
  <text x="217" y="350" fill="#6c7086" font-size="8" text-anchor="middle">VLAN Trunk</text>

  <line x1="120" y1="304" x2="102" y2="320" stroke="#6c7086" stroke-width="1" marker-end="url(#a1)"/>
  <line x1="200" y1="304" x2="217" y2="320" stroke="#6c7086" stroke-width="1" marker-end="url(#a1)"/>

  <!-- ========== Management VLAN (Center) ========== -->
  <rect x="360" y="200" width="240" height="40" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="1.5"/>
  <text x="480" y="216" fill="#a6e3a1" font-size="11" font-weight="bold" text-anchor="middle">VLAN 10 -- Management</text>
  <text x="480" y="232" fill="#6c7086" font-size="9" text-anchor="middle">10.0.10.0/24</text>

  <!-- TrueNAS -->
  <rect x="365" y="260" width="105" height="44" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="1"/>
  <text x="417" y="280" fill="#cdd6f4" font-size="10" font-weight="bold" text-anchor="middle">TrueNAS</text>
  <text x="417" y="295" fill="#6c7086" font-size="9" text-anchor="middle">10.0.10.10</text>
  <line x1="417" y1="240" x2="417" y2="260" stroke="#a6e3a1" stroke-width="1" marker-end="url(#a-green)"/>

  <!-- devvm -->
  <rect x="490" y="260" width="105" height="44" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="1"/>
  <text x="542" y="280" fill="#cdd6f4" font-size="10" font-weight="bold" text-anchor="middle">devvm</text>
  <text x="542" y="295" fill="#6c7086" font-size="9" text-anchor="middle">10.0.10.20</text>
  <line x1="542" y1="240" x2="542" y2="260" stroke="#a6e3a1" stroke-width="1" marker-end="url(#a-green)"/>

  <!-- ========== Kubernetes VLAN (Right) ========== -->
  <rect x="680" y="200" width="240" height="40" rx="6" fill="#313244" stroke="#fab387" stroke-width="1.5"/>
  <text x="800" y="216" fill="#fab387" font-size="11" font-weight="bold" text-anchor="middle">VLAN 20 -- Kubernetes</text>
  <text x="800" y="232" fill="#6c7086" font-size="9" text-anchor="middle">10.0.20.0/24</text>

  <!-- k8s nodes -->
  <rect x="690" y="260" width="100" height="44" rx="6" fill="#313244" stroke="#fab387" stroke-width="1"/>
  <text x="740" y="280" fill="#cdd6f4" font-size="10" font-weight="bold" text-anchor="middle">k8s-master</text>
  <text x="740" y="295" fill="#6c7086" font-size="9" text-anchor="middle">10.0.20.100</text>
  <line x1="740" y1="240" x2="740" y2="260" stroke="#fab387" stroke-width="1" marker-end="url(#a-orange)"/>

  <rect x="810" y="260" width="100" height="44" rx="6" fill="#313244" stroke="#fab387" stroke-width="1"/>
  <text x="860" y="280" fill="#cdd6f4" font-size="10" font-weight="bold" text-anchor="middle">k8s-node1-4</text>
  <text x="860" y="295" fill="#6c7086" font-size="9" text-anchor="middle">.101-.104</text>
  <line x1="860" y1="240" x2="860" y2="260" stroke="#fab387" stroke-width="1" marker-end="url(#a-orange)"/>

  <!-- MetalLB Pool -->
  <rect x="700" y="320" width="190" height="40" rx="6" fill="#313244" stroke="#f38ba8" stroke-width="1.5"/>
  <text x="795" y="338" fill="#f38ba8" font-size="10" font-weight="bold" text-anchor="middle">MetalLB Pool</text>
  <text x="795" y="352" fill="#6c7086" font-size="9" text-anchor="middle">10.0.20.200 - 10.0.20.250</text>
  <line x1="795" y1="304" x2="795" y2="320" stroke="#f38ba8" stroke-width="1" marker-end="url(#a1)"/>

  <!-- ========== VPN Tunnels ========== -->
  <rect x="100" y="400" width="760" height="50" rx="6" fill="none" stroke="#f9e2af" stroke-width="1.5" stroke-dasharray="5,3"/>
  <text x="480" y="418" fill="#f9e2af" font-size="12" font-weight="bold" text-anchor="middle">VPN Tunnels (overlay network)</text>

  <!-- WireGuard -->
  <rect x="150" y="430" width="180" height="30" rx="5" fill="#313244" stroke="#f9e2af" stroke-width="1"/>
  <text x="240" y="450" fill="#f9e2af" font-size="10" text-anchor="middle">WireGuard (site-to-site)</text>

  <!-- Headscale -->
  <rect x="390" y="430" width="180" height="30" rx="5" fill="#313244" stroke="#f9e2af" stroke-width="1"/>
  <text x="480" y="450" fill="#f9e2af" font-size="10" text-anchor="middle">Headscale (mesh VPN)</text>

  <!-- Remote peers -->
  <rect x="630" y="430" width="180" height="30" rx="5" fill="#313244" stroke="#f9e2af" stroke-width="1"/>
  <text x="720" y="450" fill="#f9e2af" font-size="10" text-anchor="middle">Sofia HA + Mobile clients</text>

  <!-- Arrows from pfSense down to VPN area -->
  <path d="M420,160 Q370,380 240,400" fill="none" stroke="#f9e2af" stroke-width="1" stroke-dasharray="4,2" marker-end="url(#a-yellow)"/>

  <!-- Legend -->
  <rect x="150" y="500" width="12" height="12" rx="2" fill="#89b4fa"/>
  <text x="168" y="510" fill="#cdd6f4" font-size="9">Home (untagged)</text>
  <rect x="280" y="500" width="12" height="12" rx="2" fill="#a6e3a1"/>
  <text x="298" y="510" fill="#cdd6f4" font-size="9">VLAN 10 Mgmt</text>
  <rect x="400" y="500" width="12" height="12" rx="2" fill="#fab387"/>
  <text x="418" y="510" fill="#cdd6f4" font-size="9">VLAN 20 K8s</text>
  <rect x="510" y="500" width="12" height="12" rx="2" fill="#f38ba8"/>
  <text x="528" y="510" fill="#cdd6f4" font-size="9">MetalLB</text>
  <rect x="600" y="500" width="12" height="12" rx="2" fill="#f9e2af"/>
  <text x="618" y="510" fill="#cdd6f4" font-size="9">VPN Overlay</text>
</svg>