<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 560" width="900" height="560" font-family="sans-serif">
  <defs>
    <marker id="a1" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#666666"/>
    </marker>
    <marker id="a-blue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#4a90d9"/>
    </marker>
    <marker id="a-green" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#5cb85c"/>
    </marker>
    <marker id="a-orange" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#f0ad4e"/>
    </marker>
    <marker id="a-yellow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#c9a227"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" fill="#1a1a1a" font-size="16" font-weight="bold" text-anchor="middle">Network Topology</text>

  <!-- ISP -->
  <g data-label="ISP">
    <title>ISP - Internet Service Provider uplink</title>
    <ellipse cx="450" cy="65" rx="55" ry="20" fill="#f5f5f5" stroke="#999999" stroke-width="1.5"/>
    <text x="450" y="70" fill="#333333" font-size="11" text-anchor="middle">ISP</text>
  </g>

  <!-- Arrow ISP -> pfSense -->
  <line x1="450" y1="85" x2="450" y2="110" stroke="#666666" stroke-width="1.5" marker-end="url(#a1)"/>
  <text x="468" y="102" fill="#555555" font-size="9">WAN</text>

  <!-- pfSense -->
  <g data-label="pfSense">
    <title>pfSense - Router, Firewall, DHCP, NAT</title>
    <rect x="350" y="110" width="200" height="50" rx="6" fill="#e6f4ea" stroke="#5cb85c" stroke-width="2"/>
    <text x="450" y="133" fill="#2d6a2d" font-size="13" font-weight="bold" text-anchor="middle">pfSense</text>
    <text x="450" y="150" fill="#555555" font-size="9" text-anchor="middle">Router / Firewall / DHCP / NAT</text>
  </g>

  <!-- Arrows from pfSense -->
  <line x1="390" y1="160" x2="140" y2="200" stroke="#4a90d9" stroke-width="1.5" marker-end="url(#a-blue)"/>
  <line x1="450" y1="160" x2="450" y2="200" stroke="#5cb85c" stroke-width="1.5" marker-end="url(#a-green)"/>
  <line x1="510" y1="160" x2="760" y2="200" stroke="#f0ad4e" stroke-width="1.5" marker-end="url(#a-orange)"/>

  <!-- ========== Home Network (Left) ========== -->
  <g data-label="Home Network">
    <title>Home Network - 192.168.1.0/24 (untagged VLAN)</title>
    <rect x="20" y="200" width="240" height="40" rx="6" fill="#e8f0fe" stroke="#4a90d9" stroke-width="1.5"/>
    <text x="140" y="216" fill="#2c5ea0" font-size="11" font-weight="bold" text-anchor="middle">Home Network</text>
    <text x="140" y="232" fill="#555555" font-size="9" text-anchor="middle">192.168.1.0/24 (untagged)</text>
  </g>

  <!-- Proxmox Host -->
  <g data-label="Proxmox Host">
    <title>Proxmox Host - 192.168.1.200</title>
    <rect x="35" y="260" width="210" height="44" rx="6" fill="#e8f0fe" stroke="#4a90d9" stroke-width="1"/>
    <text x="140" y="280" fill="#333333" font-size="10" font-weight="bold" text-anchor="middle">Proxmox Host</text>
    <text x="140" y="295" fill="#555555" font-size="9" text-anchor="middle">192.168.1.200</text>
  </g>
  <line x1="140" y1="240" x2="140" y2="260" stroke="#4a90d9" stroke-width="1" marker-end="url(#a-blue)"/>

  <!-- Bridges -->
  <g data-label="vmbr0">
    <title>vmbr0 - Proxmox bridge for Home LAN</title>
    <rect x="35" y="320" width="95" height="36" rx="5" fill="#f5f5f5" stroke="#999999" stroke-width="1"/>
    <text x="82" y="338" fill="#333333" font-size="9" font-weight="bold" text-anchor="middle">vmbr0</text>
    <text x="82" y="350" fill="#555555" font-size="8" text-anchor="middle">Home LAN</text>
  </g>

  <g data-label="vmbr1">
    <title>vmbr1 - Proxmox bridge for VLAN trunk</title>
    <rect x="150" y="320" width="95" height="36" rx="5" fill="#f5f5f5" stroke="#999999" stroke-width="1"/>
    <text x="197" y="338" fill="#333333" font-size="9" font-weight="bold" text-anchor="middle">vmbr1</text>
    <text x="197" y="350" fill="#555555" font-size="8" text-anchor="middle">VLAN Trunk</text>
  </g>

  <line x1="100" y1="304" x2="82" y2="320" stroke="#666666" stroke-width="1" marker-end="url(#a1)"/>
  <line x1="180" y1="304" x2="197" y2="320" stroke="#666666" stroke-width="1" marker-end="url(#a1)"/>

  <!-- ========== Management VLAN (Center) ========== -->
  <g data-label="Management VLAN">
    <title>VLAN 10 - Management network 10.0.10.0/24</title>
    <rect x="330" y="200" width="240" height="40" rx="6" fill="#e6f4ea" stroke="#5cb85c" stroke-width="1.5"/>
    <text x="450" y="216" fill="#2d6a2d" font-size="11" font-weight="bold" text-anchor="middle">VLAN 10 -- Management</text>
    <text x="450" y="232" fill="#555555" font-size="9" text-anchor="middle">10.0.10.0/24</text>
  </g>

  <!-- TrueNAS -->
  <g data-label="TrueNAS">
    <title>TrueNAS - 10.0.10.10</title>
    <rect x="335" y="260" width="105" height="44" rx="6" fill="#e6f4ea" stroke="#5cb85c" stroke-width="1"/>
    <text x="387" y="280" fill="#333333" font-size="10" font-weight="bold" text-anchor="middle">TrueNAS</text>
    <text x="387" y="295" fill="#555555" font-size="9" text-anchor="middle">10.0.10.10</text>
  </g>
  <line x1="387" y1="240" x2="387" y2="260" stroke="#5cb85c" stroke-width="1" marker-end="url(#a-green)"/>

  <!-- devvm -->
  <g data-label="devvm">
    <title>devvm - 10.0.10.20</title>
    <rect x="460" y="260" width="105" height="44" rx="6" fill="#e6f4ea" stroke="#5cb85c" stroke-width="1"/>
    <text x="512" y="280" fill="#333333" font-size="10" font-weight="bold" text-anchor="middle">devvm</text>
    <text x="512" y="295" fill="#555555" font-size="9" text-anchor="middle">10.0.10.20</text>
  </g>
  <line x1="512" y1="240" x2="512" y2="260" stroke="#5cb85c" stroke-width="1" marker-end="url(#a-green)"/>

  <!-- ========== Kubernetes VLAN (Right) ========== -->
  <g data-label="Kubernetes VLAN">
    <title>VLAN 20 - Kubernetes network 10.0.20.0/24</title>
    <rect x="640" y="200" width="240" height="40" rx="6" fill="#fff3e0" stroke="#f0ad4e" stroke-width="1.5"/>
    <text x="760" y="216" fill="#8a6d3b" font-size="11" font-weight="bold" text-anchor="middle">VLAN 20 -- Kubernetes</text>
    <text x="760" y="232" fill="#555555" font-size="9" text-anchor="middle">10.0.20.0/24</text>
  </g>

  <!-- k8s nodes -->
  <g data-label="k8s-master">
    <title>k8s-master - 10.0.20.100</title>
    <rect x="650" y="260" width="100" height="44" rx="6" fill="#fff3e0" stroke="#f0ad4e" stroke-width="1"/>
    <text x="700" y="280" fill="#333333" font-size="10" font-weight="bold" text-anchor="middle">k8s-master</text>
    <text x="700" y="295" fill="#555555" font-size="9" text-anchor="middle">10.0.20.100</text>
  </g>
  <line x1="700" y1="240" x2="700" y2="260" stroke="#f0ad4e" stroke-width="1" marker-end="url(#a-orange)"/>

  <g data-label="k8s-node1-4">
    <title>k8s-node1 through k8s-node4 - 10.0.20.101-104</title>
    <rect x="770" y="260" width="100" height="44" rx="6" fill="#fff3e0" stroke="#f0ad4e" stroke-width="1"/>
    <text x="820" y="280" fill="#333333" font-size="10" font-weight="bold" text-anchor="middle">k8s-node1-4</text>
    <text x="820" y="295" fill="#555555" font-size="9" text-anchor="middle">.101-.104</text>
  </g>
  <line x1="820" y1="240" x2="820" y2="260" stroke="#f0ad4e" stroke-width="1" marker-end="url(#a-orange)"/>

  <!-- MetalLB Pool -->
  <g data-label="MetalLB Pool">
    <title>MetalLB IP address pool - 10.0.20.200 to 10.0.20.250</title>
    <rect x="660" y="320" width="190" height="40" rx="6" fill="#fce4ec" stroke="#d9534f" stroke-width="1.5"/>
    <text x="755" y="338" fill="#a94442" font-size="10" font-weight="bold" text-anchor="middle">MetalLB Pool</text>
    <text x="755" y="352" fill="#555555" font-size="9" text-anchor="middle">10.0.20.200 - 10.0.20.250</text>
  </g>
  <line x1="755" y1="304" x2="755" y2="320" stroke="#d9534f" stroke-width="1" marker-end="url(#a1)"/>

  <!-- ========== VPN Tunnels ========== -->
  <g data-label="VPN Tunnels">
    <title>VPN overlay network - WireGuard, Headscale, and remote peers</title>
    <rect x="80" y="400" width="740" height="50" rx="6" fill="none" stroke="#c9a227" stroke-width="1.5" stroke-dasharray="5,3"/>
    <text x="450" y="418" fill="#8a6d3b" font-size="12" font-weight="bold" text-anchor="middle">VPN Tunnels (overlay network)</text>
  </g>

  <!-- WireGuard -->
  <g data-label="WireGuard">
    <title>WireGuard site-to-site VPN</title>
    <rect x="130" y="430" width="180" height="30" rx="5" fill="#fff3e0" stroke="#f0ad4e" stroke-width="1"/>
    <text x="220" y="450" fill="#8a6d3b" font-size="10" text-anchor="middle">WireGuard (site-to-site)</text>
  </g>

  <!-- Headscale -->
  <g data-label="Headscale">
    <title>Headscale - Self-hosted Tailscale mesh VPN</title>
    <rect x="360" y="430" width="180" height="30" rx="5" fill="#fff3e0" stroke="#f0ad4e" stroke-width="1"/>
    <text x="450" y="450" fill="#8a6d3b" font-size="10" text-anchor="middle">Headscale (mesh VPN)</text>
  </g>

  <!-- Remote peers -->
  <g data-label="Remote Peers">
    <title>Remote peers - Sofia HA and mobile clients</title>
    <rect x="590" y="430" width="180" height="30" rx="5" fill="#fff3e0" stroke="#f0ad4e" stroke-width="1"/>
    <text x="680" y="450" fill="#8a6d3b" font-size="10" text-anchor="middle">Sofia HA + Mobile clients</text>
  </g>

  <!-- Arrows from pfSense down to VPN area -->
  <path d="M390,160 Q340,380 220,400" fill="none" stroke="#c9a227" stroke-width="1" stroke-dasharray="4,2" marker-end="url(#a-yellow)"/>

  <!-- Legend -->
  <rect x="130" y="500" width="12" height="12" rx="2" fill="#4a90d9"/>
  <text x="148" y="510" fill="#333333" font-size="9">Home (untagged)</text>
  <rect x="260" y="500" width="12" height="12" rx="2" fill="#5cb85c"/>
  <text x="278" y="510" fill="#333333" font-size="9">VLAN 10 Mgmt</text>
  <rect x="380" y="500" width="12" height="12" rx="2" fill="#f0ad4e"/>
  <text x="398" y="510" fill="#333333" font-size="9">VLAN 20 K8s</text>
  <rect x="490" y="500" width="12" height="12" rx="2" fill="#d9534f"/>
  <text x="508" y="510" fill="#333333" font-size="9">MetalLB</text>
  <rect x="580" y="500" width="12" height="12" rx="2" fill="#c9a227"/>
  <text x="598" y="510" fill="#333333" font-size="9">VPN Overlay</text>
</svg>